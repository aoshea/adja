!function(a,b){"use strict";a.Utils=b(a)}(this,function(a){var b=function(){var a=Array.prototype.slice.call(arguments),b=a.shift(),c=a.shift();return function(){b.apply(c,a.concat(Array.prototype.slice.call(arguments)))}},c=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||a.mozRequestAnimationFrame||function(b){return a.setTimeout(b,1e3/60)};return{proxy:b,requestAnimFrame:c}}),function(a){"use strict";var b=a.document;a.render=function(){function a(a,b,c){var d;if("x-shader/x-fragment"===b.type)d=a.createShader(a.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!==b.type)return null;d=a.createShader(a.VERTEX_SHADER)}return a.shaderSource(d,c),a.compileShader(d),a.getShaderParameter(d,a.COMPILE_STATUS)?d:(alert("Error compiling shaders "+a.getShaderInfoLog(d)),null)}function c(c,d){var e,f,g;if(e=b.getElementById(d),!e)return null;for(f="",g=e.firstChild;g;)g.nodeType===g.TEXT_NODE&&(f+=g.textContent),g=g.nextSibling;return a(c,e,f)}function d(a,b,d){var e=c(a,b),f=c(a,d);if(l=a.createProgram(),a.attachShader(l,e),a.attachShader(l,f),a.linkProgram(l),!a.getProgramParameter(l,a.LINK_STATUS))throw new Error("Unable to initialize shader program");a.useProgram(l)}function e(a){m=a.width,n=a.height,k=null;try{k=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(b){}return k?(d(k,"2d-fragment-shader","2d-vertex-shader"),j(),void 0):(alert("Unable to initialise WebGL"),void 0)}function f(a,b,c,d){var e=a+c,f=b+d;o.push(a,b,e,b,a,f,a,f,e,b,e,f)}function g(a,b,c,d){o||(o=[]),f(a,b,c,d)}function h(){o=[],k.clear(k.COLOR_BUFFER_BIT)}function i(){k.bindBuffer(k.ARRAY_BUFFER,q),k.vertexAttribPointer(s,2,k.FLOAT,!1,0,0),k.bufferData(k.ARRAY_BUFFER,new Float32Array(o),k.STATIC_DRAW),k.bindBuffer(k.ARRAY_BUFFER,r),k.vertexAttribPointer(t,4,k.FLOAT,!1,0,0),p=[];for(var a=parseInt(o.length/2,10),b=0;a>b;b++)p.push(1,0,0,1,0,1,0,1,0,0,1,1);k.bufferData(k.ARRAY_BUFFER,new Float32Array(p),k.STATIC_DRAW),k.drawArrays(k.TRIANGLES,0,parseInt(o.length/2,10))}function j(){t=k.getAttribLocation(l,"a_colour"),k.enableVertexAttribArray(t),s=k.getAttribLocation(l,"a_position"),k.enableVertexAttribArray(s);var a=k.getUniformLocation(l,"u_resolution");k.uniform2f(a,m,n),q=k.createBuffer(),r=k.createBuffer()}var k,l,m,n,o,p,q,r,s,t;return{init:e,clear:h,flush:i,drawRect:g}}()}(this),function(a){"use strict";var b=a.document,c=a.render,d=a.Utils.proxy,e=a.Utils.requestAnimFrame,f={init:function(a,b){this.x=a,this.y=b,this.ax=4,this.ay=2},update:function(){this.ax*=g.FRICTION,this.ay*=g.FRICTION,this.x+=this.ax,this.y+=this.ay,this.x<g.BOUNDARY.x0&&(this.x+=g.BOUNDARY.x1),this.y<g.BOUNDARY.y0&&(this.y+=g.BOUNDARY.y1),this.x>g.BOUNDARY.x1&&(this.x=g.BOUNDARY.x0),this.y>g.BOUNDARY.y1&&(this.y=g.BOUNDARY.y0)}},g={BOUNDARY:{x0:0,x1:320,y0:0,y1:480},MAX_PARTICLES:500,FRICTION:.99,init:function(){c.init(b.getElementById("canvas")),this.reset(),b.onmousemove=d(this.handleMouseMove,this),e(d(this.tick,this))},draw:function(){c.clear(),this.drawParticles(),c.flush()},drawParticles:function(){var a,b,d=this.numParticles;for(b=0;d>b;++b)a=this.particles[b],c.drawRect(a.x,a.y,12,12)},update:function(){this.updateParticles()},updateParticles:function(){var a,b=this.numParticles;for(a=0;b>a;++a)this.particles[a].update()},tick:function(){this.update(),this.draw(),e(d(this.tick,this))},reset:function(){this.createParticles()},randInRange:function(a){return parseInt(Math.random()*a,10)},createParticles:function(){var a,b,c=g.MAX_PARTICLES;for(this.particles=[],b=0;c>b;++b)a=Object.create(f),a.init(this.randInRange(320),this.randInRange(480)),this.particles.push(a);this.numParticles=this.particles.length},handleMouseMove:function(a){var b,c,d,e,f,g=this.particles.length;for(f=0;g>f;++f)e=this.particles[f],b=e.x-a.pageX,c=e.y-a.pageY,d=Math.sqrt(b*b+c*c),b/=d,c/=d,e.ax+=.05*b,e.ay+=.05*c}},h=Object.create(g);h.init()}(this);